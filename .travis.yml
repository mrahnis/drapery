language: python
sudo: false
cache:
  directories:
  - "$HOME/.pip-cache/"
env:
  global:
  - PIP_WHEEL_DIR=$HOME/.cache/pip/wheels
  - PIP_FIND_LINKS=file://$HOME/.cache/pip/wheels
python:
- '3.7'
addons:
  apt:
    packages:
    - gdal-bin
    - libgdal-dev
install:
- pip wheel -r requirements.txt
- pip install .
script: pytest
deploy:
  provider: pypi
  user: "__token__"
  password:
    secure: Wt1mBWs1VUwWoUc81m9g2a+qzyBVxnB+CCteOyUoaL22pqo5Y/KpavjiQA2GHdExezOKkQ1+pyyQptj9Md795Te4YcZPfnkC2I+rJL22X3RuAfubAUUA0UghA4YqZtPzchfqNa+JvO9BBrmJFdFNyAq56G2L49D/o1Qi6e0jmQduG7KALCZP4WviVGOxygH1HIUvrYUh4CfVi3Epy464E8N094TwMAa3x7GzQDWMpHBbP0RLe2DQml5B40PCzxxRfPetNLBa8mHupn6uqWBOzliTxi/deTeLhmqOZVGzVXMe84xvj+x3iG2tXhu+7qmsovGHJgyCXEgJ4TKWug5IM5foThot2eJMPzcy7bhvJkhIGbakkBqc0SJ71WWx4oLW4sQjrpxwzJweV5yAhIAjdE5gtNjISNjRmWnh4AW1NCByT960ueJj4crKUB0/G3PNkXZd8xu3OTW3JplydN7j/YUy23v/jem4ds9L+ACSwnY/XXyF2XTixUu47Ai+vzWloLi/4XazWClFDxV/sppY4S7M55F1WaVJQXwJc8CgNOn/D1WPdFLxnYKifsvtWHyJ9SYFSEerLeJV3dUWOTbOJa6eB2EJ87r1dZ0UFVta0FnVXNj2x1LAcpFGFxSf6RwDOCuTdJxx4IFPFF99rgI52Z+mmVCKfrdI/vu53hYc2aw=
  on:
    tags: true
    distributions: sdist bdist_wheel
    repo: mrahnis/drapery
  skip_cleanup: true
